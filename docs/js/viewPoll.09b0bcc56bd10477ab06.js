(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"3UDd":function(module,exports,__webpack_require__){"use strict";eval('/* WEBPACK VAR INJECTION */(function(module) {\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(__webpack_require__("q1tI"));\n\nvar _PollAPIContext = __webpack_require__("rPFB");\n\nvar _reactBootstrap = __webpack_require__("ipP0");\n\nvar _axios = _interopRequireDefault(__webpack_require__("vDqi"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\n(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal : __webpack_require__("0cfB")).enterModule;\n  enterModule && enterModule(module);\n})();\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nvar View = function View(props) {\n  var _useContext = (0, _react.useContext)(_PollAPIContext.PollAPIContext),\n      getPoll = _useContext.getPoll;\n\n  var _useState = (0, _react.useState)([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentPoll = _useState2[0],\n      setCurrentPoll = _useState2[1];\n\n  (0, _react.useEffect)(function () {\n    if (currentPoll.length == 0) {\n      getPoll(props.match.params.id).then(function (res) {\n        setSortedPoll(res.data);\n      });\n    }\n  }, [currentPoll]);\n\n  var setSortedPoll = function setSortedPoll(d) {\n    var obj = d;\n    obj.items.sort(function (a, b) {\n      return a.item_label.localeCompare(b.item_label);\n    });\n    setCurrentPoll(obj);\n  };\n\n  var vote = function vote(songID) {\n    _axios.default.post(\'/api/vote\', {\n      songID: songID,\n      slugID: currentPoll.slug\n    }).then(function (res) {\n      setSortedPoll(res.data);\n    }).catch(function (err) {\n      if (err.response.status == 400) {\n        alert(err.response.data);\n      }\n    });\n  };\n\n  var caps = function caps(x) {\n    return x.charAt(0).toUpperCase() + x.slice(1).toLowerCase();\n  };\n\n  return _react.default.createElement(_reactBootstrap.Col, {\n    md: {\n      span: 10,\n      offset: 1\n    }\n  }, _react.default.createElement(_reactBootstrap.Row, null, _react.default.createElement(_reactBootstrap.Col, {\n    sm: {\n      span: 1\n    }\n  }, _react.default.createElement("a", {\n    className: "btn btn-primary",\n    onClick: function onClick() {\n      return props.history.push(\'/poll/list\');\n    }\n  }, _react.default.createElement("i", {\n    className: "fa fa-chevron-left"\n  }), " Back to list")), _react.default.createElement(_reactBootstrap.Col, {\n    sm: {\n      span: 6,\n      offset: 2\n    }\n  }, _react.default.createElement("h3", {\n    style: {\n      fontWeight: 300\n    }\n  }, _react.default.createElement("i", {\n    className: "fa fa-calendar"\n  }), " ", currentPoll.poll_name))), _react.default.createElement(_reactBootstrap.Card, null, _react.default.createElement(_reactBootstrap.Table, {\n    striped: true,\n    hover: true\n  }, _react.default.createElement("thead", null, _react.default.createElement("tr", null, _react.default.createElement("th", {\n    style: {\n      width: 350,\n      maxWidth: 250\n    }\n  }, "Song"), _react.default.createElement("th", {\n    style: {\n      width: 150\n    }\n  }), _react.default.createElement("th", null, "Vote"), _react.default.createElement("th", null, "Votes"))), _react.default.createElement("tbody", null, currentPoll.items && currentPoll.items.map(function (v, i) {\n    return _react.default.createElement("tr", {\n      key: i\n    }, _react.default.createElement("td", {\n      style: {\n        overflow: \'hidden\'\n      }\n    }, _react.default.createElement("strong", null, v.item_label)), _react.default.createElement("td", null, v.link ? _react.default.createElement("a", {\n      className: "btn btn-primary btn-sm",\n      href: "".concat(v.link),\n      target: "_blank"\n    }, _react.default.createElement("strong", null, _react.default.createElement("i", {\n      className: "fa fa-link"\n    }), " Video Link")) : "N/A"), _react.default.createElement("td", null, _react.default.createElement(_reactBootstrap.Button, {\n      onClick: function onClick() {\n        return vote(v.id);\n      },\n      variant: "success",\n      size: "sm"\n    }, _react.default.createElement("i", {\n      className: "fa fa-thumbs-up"\n    }))), _react.default.createElement("td", null, v.users_vote && v.users_vote.length > 0 ? v.users_vote.map(function (v, i) {\n      if (v.users_vote && v.users_vote.length === i) {\n        return ", " + caps(v);\n      }\n\n      if (i === 0) {\n        return caps(v);\n      }\n\n      return ", " + caps(v);\n    }) : "(No votes yet)"));\n  })))));\n};\n\nvar _default = View;\nvar _default2 = _default;\nexports.default = _default2;\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal : __webpack_require__("0cfB")).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(View, "View", "/Users/LukeSimonetti/Development/Projects/song-poll/src/views/poll/View.js");\n  reactHotLoader.register(_default, "default", "/Users/LukeSimonetti/Development/Projects/song-poll/src/views/poll/View.js");\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal : __webpack_require__("0cfB")).leaveModule;\n  leaveModule && leaveModule(module);\n})();\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__("YuTi")(module)))\n\n//# sourceURL=webpack:///./src/views/poll/View.js?')}}]);